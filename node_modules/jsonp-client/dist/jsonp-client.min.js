(function(e){"use strict";var t=e.jsonpClient,n=typeof window!="undefined",r,i,s=/[\?|&]callback=([a-z0-9_]+)/i,o=function(){var e=Array.prototype.slice.apply(arguments),t,n=e.slice(0,-1),r=0,s,o=[],u,a;try{t=e.slice(-1)[0];if(typeof t!="function")throw new Error("Callback not found")}catch(f){throw new Error("jsonpClient expects a callback")}typeof n[0]!="string"&&(n=n[0]),a=function(){var e=0;o=o.sort(function(e,t){return e.position>t.position});for(e=0;o.length>e;e+=1)o[e]=o[e].data;o.unshift(null),t.apply(null,o)},u=function(e,u){i(n[r],function(e,r){if(s)return;s=e;if(e)return t(e);o.push({data:r,position:u}),o.length===n.length&&a()})};for(r=0;n.length>r;r+=1)u(n[r]+"",r)};o.noConflict=function(){return e.jsonpClient=t,o},r=function(){var e,t,n=document.getElementsByTagName("head")[0];return t=function(e,t){var r=document.createElement("script"),i=!1;r.src=e,r.async=!0,r.onload=r.onreadystatechange=function(){!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(i=!0,r.onload=r.onreadystatechange=null,r&&r.parentNode&&r.parentNode.removeChild(r),t())},n.appendChild(r)},e=function(e,t){var n=e.match(s);if(!n)return t(new Error("Could not find callback on URL"));t(null,n[1])},function(n,r){e(n,function(e,i){var s,o=window[i];if(e)return r(e);window[i]=function(e){s=e},t(n,function(e){!e&&!s&&(e=new Error("Calling to "+i+" did not returned a JSON response."+"Make sure the callback "+i+" exists and is properly formatted."));if(o)window[i]=o;else try{delete window[i]}catch(t){window[i]=undefined}r(e,s)})})}},i=n?r():require("./jsonp-node.js"),typeof module!="undefined"&&module.exports?module.exports=o:e.jsonpClient=o})(this);